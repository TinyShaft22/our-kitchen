---
phase: 23-alexa-setup
plan: 02
type: execute
wave: 2
depends_on: ["23-01"]
files_modified:
  - our-kitchen-alexa/lambda/index.js
  - our-kitchen-alexa/lambda/package.json
  - our-kitchen-alexa/skill-package/interactionModels/custom/en-US.json
autonomous: true

must_haves:
  truths:
    - "Saying 'Alexa, open our kitchen' gives a welcome response"
    - "Saying 'hello' triggers HelloWorldIntent response"
    - "Saying 'help' gives usage guidance"
    - "Saying 'stop' or 'cancel' ends the session gracefully"
    - "Unknown commands trigger FallbackIntent with helpful response"
  artifacts:
    - path: "our-kitchen-alexa/lambda/index.js"
      provides: "Lambda handler with all required intents"
      min_lines: 80
      contains: "LaunchRequestHandler"
    - path: "our-kitchen-alexa/skill-package/interactionModels/custom/en-US.json"
      provides: "Interaction model with intents and utterances"
      contains: "our kitchen"
  key_links:
    - from: "our-kitchen-alexa/lambda/index.js"
      to: "Alexa Lambda runtime"
      via: "exports.handler"
      pattern: "exports\\.handler.*SkillBuilders"
    - from: "en-US.json"
      to: "index.js"
      via: "intent name matching"
      pattern: "HelloWorldIntent"
---

<objective>
Write the Lambda handler code and interaction model for a basic "Hello World" skill that responds to voice commands.

Purpose: Establish the foundational handler pattern and verify the complete deployment workflow works before building real features.

Output: A working Alexa skill that responds to launch, hello, help, stop, cancel, and fallback requests.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/23-alexa-setup/23-RESEARCH.md
@.planning/phases/23-alexa-setup/23-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write Lambda Handler Code</name>
  <files>our-kitchen-alexa/lambda/index.js, our-kitchen-alexa/lambda/package.json</files>
  <action>
Replace the template `index.js` with a complete handler implementing all required intents for certification.

**File: our-kitchen-alexa/lambda/index.js**

Write handlers for:
1. **LaunchRequestHandler** - "Alexa, open our kitchen"
   - Speaks: "Welcome to Our Kitchen! You can ask me about meals, recipes, or your grocery list. What would you like to do?"
   - Includes reprompt

2. **HelloWorldIntentHandler** - "hello", "hi", "say hello"
   - Speaks: "Hello from Our Kitchen!"

3. **HelpIntentHandler** - AMAZON.HelpIntent
   - Speaks: "You can ask me to show meals, read a recipe, or check your grocery list. How can I help?"
   - Includes reprompt

4. **CancelAndStopIntentHandler** - AMAZON.CancelIntent, AMAZON.StopIntent
   - Speaks: "Goodbye!"

5. **FallbackIntentHandler** - AMAZON.FallbackIntent
   - Speaks: "Sorry, I don't know about that. Try asking for help."
   - Includes reprompt

6. **SessionEndedRequestHandler** - SessionEndedRequest
   - Logs session end, returns empty response

7. **ErrorHandler** - Catch-all error handler
   - Logs error details
   - Speaks: "Sorry, I had trouble doing what you asked. Please try again."
   - Includes reprompt

Use ASK SDK v2 pattern with `canHandle()` and `handle()` methods.
Export with `Alexa.SkillBuilders.custom().addRequestHandlers(...).addErrorHandlers(...).lambda()`

**File: our-kitchen-alexa/lambda/package.json**

Ensure dependencies include:
- `ask-sdk-core`: "^2.14.0"
- `ask-sdk-model`: "^1.39.0"

Set Node.js engine to 16.x for Alexa-Hosted compatibility.
  </action>
  <verify>
1. `cat our-kitchen-alexa/lambda/index.js | grep -c "Handler"` - should be 7+
2. `grep "exports.handler" our-kitchen-alexa/lambda/index.js` - should exist
3. `grep "ask-sdk-core" our-kitchen-alexa/lambda/package.json` - should exist
  </verify>
  <done>Lambda handler with all required intents written to index.js</done>
</task>

<task type="auto">
  <name>Task 2: Write Interaction Model</name>
  <files>our-kitchen-alexa/skill-package/interactionModels/custom/en-US.json</files>
  <action>
Replace the template interaction model with Our Kitchen's model.

**File: our-kitchen-alexa/skill-package/interactionModels/custom/en-US.json**

```json
{
  "interactionModel": {
    "languageModel": {
      "invocationName": "our kitchen",
      "intents": [
        {
          "name": "AMAZON.CancelIntent",
          "samples": []
        },
        {
          "name": "AMAZON.HelpIntent",
          "samples": []
        },
        {
          "name": "AMAZON.StopIntent",
          "samples": []
        },
        {
          "name": "AMAZON.FallbackIntent",
          "samples": []
        },
        {
          "name": "AMAZON.NavigateHomeIntent",
          "samples": []
        },
        {
          "name": "HelloWorldIntent",
          "slots": [],
          "samples": [
            "hello",
            "hi",
            "say hello",
            "say hi",
            "greetings",
            "good morning",
            "good afternoon",
            "good evening"
          ]
        }
      ],
      "types": []
    }
  }
}
```

Key points:
- Invocation name: "our kitchen" (may need to change to "kitchen helper" if certification fails)
- Include all Amazon built-in intents (Cancel, Help, Stop, Fallback, NavigateHome)
- HelloWorldIntent with varied utterances
  </action>
  <verify>`grep "our kitchen" our-kitchen-alexa/skill-package/interactionModels/custom/en-US.json` - should exist</verify>
  <done>Interaction model written with invocation name and intents</done>
</task>

<task type="auto">
  <name>Task 3: Deploy and Test</name>
  <files>None (git operations)</files>
  <action>
Deploy the skill using git-based deployment (Alexa-Hosted workflow).

**Step 1: Install Lambda dependencies locally (for syntax validation)**

```bash
cd "/mnt/c/Users/Nick M/Desktop/Food App Idea/our-kitchen-alexa/lambda"
npm install
```

**Step 2: Commit and push to deploy**

```bash
cd "/mnt/c/Users/Nick M/Desktop/Food App Idea/our-kitchen-alexa"
git add .
git commit -m "feat(23-02): implement hello world handler

- Add LaunchRequest with welcome message
- Add HelloWorldIntent handler
- Add required Amazon intents (Help, Cancel, Stop, Fallback)
- Add error handler for graceful failures
- Update interaction model with invocation name 'our kitchen'"

git push origin master
```

The push to master triggers automatic deployment to the development stage.

**Step 3: Wait and verify deployment**

Deployment takes 1-2 minutes. Check the Developer Console:
1. Go to https://developer.amazon.com/alexa/console/ask
2. Click on "Our Kitchen" skill
3. Go to "Test" tab
4. Enable testing in "Development" mode
5. Type or say: "open our kitchen"
6. Should hear welcome message

**Testing commands to try in simulator:**
- "open our kitchen" -> Welcome message
- "hello" -> "Hello from Our Kitchen!"
- "help" -> Help message
- "stop" -> "Goodbye!"
- "something random" -> Fallback message
  </action>
  <verify>
1. `git log --oneline -1` in our-kitchen-alexa shows the commit
2. In Developer Console Test tab: "open our kitchen" returns welcome response
3. In Developer Console Test tab: "hello" returns "Hello from Our Kitchen!"
  </verify>
  <done>Skill deployed and responding to voice commands in Alexa Simulator</done>
</task>

</tasks>

<verification>
- [ ] `our-kitchen-alexa/lambda/index.js` contains all 7 handlers
- [ ] `our-kitchen-alexa/lambda/package.json` has ask-sdk-core dependency
- [ ] `our-kitchen-alexa/skill-package/interactionModels/custom/en-US.json` has "our kitchen" invocation
- [ ] Git push to master completed successfully
- [ ] Alexa Simulator responds to "open our kitchen" with welcome message
- [ ] Alexa Simulator responds to "hello" with hello response
</verification>

<success_criteria>
- Complete Lambda handler with all required intents for certification
- Interaction model with "our kitchen" invocation name
- Skill deployed to development stage via git push
- Skill responds correctly in Alexa Simulator to:
  - Launch request (open our kitchen)
  - HelloWorldIntent (hello, hi)
  - Help, Cancel, Stop, Fallback intents
</success_criteria>

<output>
After completion, create `.planning/phases/23-alexa-setup/23-02-SUMMARY.md`
</output>
