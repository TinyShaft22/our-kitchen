---
phase: 06-grocery-generation
plan: 02
type: execute
---

<objective>
Build grocery list page UI with generation trigger and organized display.

Purpose: Allow users to generate grocery list from weekly meals and view items grouped by category with store indicators.
Output: Functional GroceryListPage with generate button, item cards, and organized layout.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-phase.md
@./.claude/get-shit-done/templates/summary.md
@./.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior plan in this phase
@.planning/phases/06-grocery-generation/06-01-SUMMARY.md

# Key source files
@src/types/index.ts
@src/hooks/useGroceryList.ts
@src/utils/generateGroceryItems.ts
@src/pages/GroceryListPage.tsx
@src/components/meals/MealCard.tsx
@src/components/ui/FloatingActionButton.tsx

**Tech stack available:** React, Tailwind CSS, Firebase hooks
**Established patterns:**
- Card components (MealCard, WeeklyMealCard) with consistent styling
- FAB for primary actions
- Loading/empty/populated state handling
- CATEGORIES constant for grouping
- Store badges using STORES constant
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create GroceryItemCard component</name>
  <files>src/components/grocery/GroceryItemCard.tsx</files>
  <action>
Create component to display a single grocery item:

Props: { item: GroceryItem }

Layout:
- White background card with rounded-soft, shadow-soft (match MealCard pattern)
- Item name (font-semibold)
- Quantity + unit on same line (text-sm text-charcoal/70)
- Store badge: small pill with store name (bg-honey/20 text-honey for Costco, bg-sage/20 for Trader Joe's, etc. - or just use terracotta/20 for all stores to keep it simple)
- Category badge: small pill with category name (text-xs)
- 44px minimum touch target

Keep it simple - no edit/delete buttons yet (Phase 7 will add shopping mode interactions).
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>GroceryItemCard component renders item name, quantity, store and category badges</done>
</task>

<task type="auto">
  <name>Task 2: Wire up GroceryListPage with generation and display</name>
  <files>src/pages/GroceryListPage.tsx</files>
  <action>
Transform placeholder into functional page:

1. Import hooks: useHousehold, useMeals, useWeeklyPlan, useGroceryList
2. Import: generateGroceryItems, GroceryItemCard, FloatingActionButton, CATEGORIES

3. State handling:
   - Combined loading state from all hooks
   - Empty state when no grocery items
   - Populated state with items grouped by category

4. Generate button (FAB at bottom-right, above nav):
   - On click: call generateGroceryItems(meals, currentWeek?.meals || [])
   - Then call generateFromWeeklyPlan(generatedItems)
   - Show generating state while async operation runs

5. Display layout:
   - Page title: "Grocery List"
   - Subtitle showing item count: "X items"
   - Group items by category using CATEGORIES order
   - Section header for each category with items
   - Only show categories that have items

6. States:
   - Loading: spinner or "Loading..."
   - Empty (no items): "No items yet. Generate from your weekly plan!" message
   - Populated: grouped item cards

Use pb-32 or similar to avoid FAB/nav overlap.
  </action>
  <verify>`npm run dev` starts, navigate to Grocery List page</verify>
  <done>GroceryListPage shows generate button, displays items grouped by category</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Grocery list generation from weekly meals with organized display</what-built>
  <how-to-verify>
    1. Run: `npm run dev`
    2. Ensure you have at least one meal in the Meal Library (with ingredients)
    3. Add that meal to This Week's Meals on the Home page
    4. Navigate to Grocery List page
    5. Tap the generate button (FAB)
    6. Verify: Items appear grouped by category
    7. Verify: Each item shows name, quantity, and store badge
    8. Change servings on the Home page, regenerate
    9. Verify: Quantities update correctly (scaled by servings ratio)
    10. Verify: Duplicate ingredients across meals are combined
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Generate button creates grocery items from weekly plan
- [ ] Items display grouped by category
- [ ] Quantity scaling works correctly
- [ ] Duplicate ingredients are combined
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Human verification approved
- Phase 6 complete - grocery generation working
</success_criteria>

<output>
After completion, create `.planning/phases/06-grocery-generation/06-02-SUMMARY.md`
</output>
