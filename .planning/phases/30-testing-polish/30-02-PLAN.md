---
phase: 30-testing-polish
plan: 02
type: execute
wave: 2
depends_on: ["30-01"]
files_modified:
  - .planning/phases/30-testing-polish/30-TEST-CHECKLIST.md
  - our-kitchen-alexa/lambda/handlers/*.js (potential fixes)
  - our-kitchen-alexa/lambda/apl/*.json (potential fixes)
  - functions/src/alexa/*.ts (potential fixes)
autonomous: false

must_haves:
  truths:
    - "User can link household via voice PIN"
    - "User can browse meals and see recipes"
    - "User can navigate cooking mode with voice and touch"
    - "User can manage grocery list via voice"
    - "APL displays work correctly on Echo Show 5"
  artifacts:
    - path: ".planning/phases/30-testing-polish/30-TEST-CHECKLIST.md"
      provides: "Completed test checklist with pass/fail results"
      contains: "[x]"
  key_links:
    - from: "Alexa voice commands"
      to: "Lambda handlers"
      via: "Intent routing"
      pattern: "IntentHandler"
    - from: "Lambda handlers"
      to: "Cloud Functions"
      via: "HTTP requests"
      pattern: "firebaseClient"
---

<objective>
Execute end-to-end manual testing on Echo Show 5 device, fix any issues found, and document test results.

Purpose: Verify all Alexa features work correctly on real hardware before v2.0 completion
Output: Completed test checklist, any bug fixes, documented test results
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/30-testing-polish/30-01-SUMMARY.md
@.planning/phases/30-testing-polish/30-TEST-CHECKLIST.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Alexa skill for Our Kitchen with meal browsing, cooking mode, and grocery management</what-built>
  <name>Task 1: Execute test checklist on Echo Show 5</name>
  <how-to-verify>
**Execute each test in 30-TEST-CHECKLIST.md on your Echo Show 5:**

1. **Open the test checklist:** `.planning/phases/30-testing-polish/30-TEST-CHECKLIST.md`

2. **Start with Section 1: Household Linking**
   - Say "Alexa, open our kitchen"
   - Follow the linking flow with your PIN
   - Mark each test as pass/fail

3. **Continue through all sections:**
   - Section 2: Meal Browsing
   - Section 3: Recipe Detail
   - Section 4: Cooking Mode - Voice
   - Section 5: Cooking Mode - Touch
   - Section 6: Cooking Resume
   - Section 7: Grocery List - Reading
   - Section 8: Grocery List - Adding
   - Section 9: Grocery List - Removing
   - Section 10: APL Visual Quality

4. **Document any issues in the "Issues Found" table**

5. **Calculate totals in "Test Results Summary"**

**Report back with:**
- Number of tests passed vs failed
- Description of any failures
- Any issues that need fixing
  </how-to-verify>
  <resume-signal>Report test results: "X passed, Y failed" and list any failures</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Fix critical issues (if any)</name>
  <files>Depends on issues found</files>
  <action>
Based on test results from Task 1:

**If all tests pass:** Skip this task, proceed to Task 3.

**If failures found:**
1. Analyze each failure to determine root cause
2. Categorize as:
   - **Lambda handler issue** (wrong response, missing handler)
   - **APL display issue** (layout, styling, touch targets)
   - **Cloud Function issue** (wrong data, API error)
   - **Interaction model issue** (utterance not recognized)

3. Fix critical issues (blocking functionality):
   - Update Lambda handlers in `our-kitchen-alexa/lambda/handlers/`
   - Update APL documents in `our-kitchen-alexa/lambda/apl/`
   - Update Cloud Functions in `functions/src/alexa/`
   - Update interaction model in `our-kitchen-alexa/skill-package/interactionModels/`

4. Redeploy affected components:
   - Lambda: `cd our-kitchen-alexa && git add . && git commit -m "fix: [description]" && git push`
   - Cloud Functions: `cd functions && npm run build && firebase deploy --only functions`

5. Document fixes in test checklist "Issues Found" table with resolution notes

**Non-critical issues (polish):**
- Log in STATE.md as deferred for future polish
- Don't block phase completion for minor visual tweaks
  </action>
  <verify>
- Critical failures have fixes deployed
- Non-critical issues documented
- Re-test fixed items to confirm resolution
  </verify>
  <done>All critical issues fixed and verified, non-critical issues documented</done>
</task>

<task type="auto">
  <name>Task 3: Update test checklist with final results</name>
  <files>.planning/phases/30-testing-polish/30-TEST-CHECKLIST.md</files>
  <action>
Update the test checklist document with final results:

1. **Mark all test results:**
   - `[x]` for passed tests
   - `[ ]` for failed tests (with notes)

2. **Complete "Issues Found" table:**
   - List each issue discovered
   - Note severity (critical/minor)
   - Document resolution status

3. **Fill "Test Results Summary":**
   ```markdown
   ## Test Results Summary
   - Total tests: [count]
   - Passed: [count]
   - Failed: [count]
   - Blocked: [count]

   **Test Date:** [date]
   **Tested By:** User
   **Device:** Echo Show 5
   **Skill Version:** Development
   ```

4. **Add overall assessment:**
   ```markdown
   ## Overall Assessment

   **Status:** PASS / FAIL / PARTIAL

   **Key Findings:**
   - [Finding 1]
   - [Finding 2]

   **Recommendations:**
   - [Any follow-up work needed]
   ```
  </action>
  <verify>
- All test rows have pass/fail marked
- Issues Found table is complete
- Test Results Summary has totals
- Overall assessment section added
  </verify>
  <done>Test checklist fully documented with results and assessment</done>
</task>

</tasks>

<verification>
- User completed all test scenarios on Echo Show 5
- Any critical failures have been fixed and re-verified
- Test checklist is fully documented
- Phase 30 can be marked complete
</verification>

<success_criteria>
- 90%+ tests passing (blocking issues fixed)
- Test checklist shows documented pass/fail for all scenarios
- Critical functionality works: linking, meals, cooking, groceries
- Minor polish issues logged but not blocking
- Ready to mark v2.0 Alexa Integration substantially complete
</success_criteria>

<output>
After completion, create `.planning/phases/30-testing-polish/30-02-SUMMARY.md`
</output>
