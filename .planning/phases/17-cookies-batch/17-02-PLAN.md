---
phase: 17-cookies-batch
plan: 02
type: execute
---

<objective>
Complete cookie recipe scraping (19-27) and generate consolidated JSON import file.

Purpose: Finish scraping remaining recipes and produce import-ready JSON for app
Output: cookies-import.json file ready for Settings > Import Meals
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-phase.md
./.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/16-scraping-infrastructure/INGREDIENT-MAP.md
@.planning/phases/16-scraping-infrastructure/test-recipe.json
@.planning/phases/17-cookies-batch/17-01-SUMMARY.md
@.planning/phases/17-cookies-batch/cookies-batch-1.md
@.planning/phases/17-cookies-batch/cookies-batch-2.md

**JSON format (from Phase 16):**
```json
{
  "version": 1,
  "meals": [
    {
      "name": "Recipe Title",
      "servings": 15,
      "isBaking": true,
      "ingredients": [
        { "name": "ingredient", "category": "baking", "defaultStore": "costco" }
      ],
      "instructions": "## Title\n\n**Yield:**...\n\n### Ingredients\n...\n\n### Instructions\n...\n\n---\n[Original recipe](url)",
      "subcategory": "Broma/Cookies"
    }
  ]
}
```

**Instruction formatting rules (from 16-01):**
- Use `1. Step name - description` NOT `1. **Step:** description` (avoids line break issues)
- Include ## headers, ingredient list in markdown, numbered instructions
- Original recipe link at bottom
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scrape final batch of cookie recipes (19-27)</name>
  <files>.planning/phases/17-cookies-batch/cookies-batch-3.md</files>
  <action>
    For each recipe (19-27), use WebFetch to extract:
    - Recipe title
    - Yield information
    - Full ingredients list (qty, unit, name)
    - Complete instructions
    - Original URL

    Store extracted data in markdown file for JSON conversion.
    Format each recipe clearly separated.
    Use INGREDIENT-MAP.md to pre-identify categories for each ingredient.

    Note: This batch completes the remaining ~9 recipes to reach 27 total.
  </action>
  <verify>cookies-batch-3.md contains remaining recipes with all fields</verify>
  <done>All 27 cookie recipes scraped and documented across 3 batch files</done>
</task>

<task type="auto">
  <name>Task 2: Generate consolidated cookies-import.json</name>
  <files>.planning/phases/17-cookies-batch/cookies-import.json</files>
  <action>
    Combine all scraped recipes from batch files into single JSON import file.

    For each recipe:
    1. Parse ingredients and map to categories using INGREDIENT-MAP.md
    2. Format instructions as markdown with:
       - ## Title header
       - Yield, prep/cook times
       - ### Ingredients section with bullet list
       - ### Instructions section with numbered steps (use "1. Step - description" format)
       - Attribution link at bottom
    3. Set isBaking: true
    4. Set subcategory: "Broma/Cookies"
    5. Estimate servings from yield info

    JSON structure: { version: 1, meals: [...] }

    Validate JSON syntax before writing.
  </action>
  <verify>cat cookies-import.json | python3 -m json.tool (validates JSON)</verify>
  <done>Valid JSON file with all 27 cookie recipes, proper ingredient mapping</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>cookies-import.json with 27 Broma Bakery cookie recipes</what-built>
  <how-to-verify>
    1. Review a sample of 3-4 recipes in the JSON file
    2. Verify ingredient categories match INGREDIENT-MAP.md
    3. Confirm instructions are well-formatted markdown
    4. Optionally test import of 1 recipe via Settings > Import Meals
  </how-to-verify>
  <resume-signal>Type "approved" to confirm JSON is ready for Phase 21 import, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All 27 cookie recipes scraped across 3 batch files
- [ ] cookies-import.json is valid JSON
- [ ] All ingredients have categories from INGREDIENT-MAP.md
- [ ] Instructions follow markdown format with proper headers
- [ ] Human verification passed
</verification>

<success_criteria>

- All 27 cookie recipes in single import file
- JSON validates without errors
- Ingredients correctly categorized
- Instructions properly formatted
- Ready for Phase 21 bulk import
</success_criteria>

<output>
After completion, create `.planning/phases/17-cookies-batch/17-02-SUMMARY.md`
</output>
