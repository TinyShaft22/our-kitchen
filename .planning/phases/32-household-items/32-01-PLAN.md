---
phase: 32-household-items
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/types/index.ts
  - src/hooks/useHouseholdItems.ts
autonomous: true

must_haves:
  truths:
    - "HouseholdItem type exists with name, store, category, brand, notes fields"
    - "useHouseholdItems hook provides real-time subscription to household items"
    - "CRUD operations (add, update, delete) work for household items"
    - "Items include nameLower field for case-insensitive Alexa lookup"
  artifacts:
    - path: "src/types/index.ts"
      provides: "HouseholdItem interface"
      contains: "interface HouseholdItem"
    - path: "src/hooks/useHouseholdItems.ts"
      provides: "CRUD hook for household items"
      exports: ["useHouseholdItems"]
  key_links:
    - from: "src/hooks/useHouseholdItems.ts"
      to: "src/types/index.ts"
      via: "import type { HouseholdItem }"
      pattern: "import.*HouseholdItem.*from.*types"
    - from: "src/hooks/useHouseholdItems.ts"
      to: "Firestore"
      via: "onSnapshot subscription"
      pattern: "onSnapshot"
---

<objective>
Create the HouseholdItem data model and CRUD hook for managing recurring household products.

Purpose: Establish the foundation for household items - a library of saved products (paper towels, toothpaste, etc.) that can be quickly added to the grocery list. This is distinct from Staples (auto-add) - household items are on-demand.

Output: TypeScript interface and React hook with Firestore real-time sync.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/32-household-items/32-RESEARCH.md

Reference patterns:
@src/types/index.ts (existing Staple interface)
@src/hooks/useStaples.ts (CRUD hook pattern to clone)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add HouseholdItem interface to types</name>
  <files>src/types/index.ts</files>
  <action>
Add the HouseholdItem interface after the existing Staple interface (around line 164):

```typescript
// HouseholdItem - saved product for quick grocery adds (on-demand, not auto-add like Staples)
export interface HouseholdItem {
  id: string;
  name: string;                    // Display name: "Paper Towels"
  nameLower: string;               // Lowercase for Alexa lookup: "paper towels"
  store: Store;                    // Where to buy
  category: Category;              // Grocery category
  brand?: string;                  // Optional: "Bounty"
  notes?: string;                  // Optional: "Get the big rolls"
  householdCode: string;
}
```

Key differences from Staple:
- NO `enabled` field (these are on-demand, not auto-add)
- ADDS `nameLower` field for case-insensitive Alexa lookup
- ADDS `brand` and `notes` fields for product specifics
  </action>
  <verify>TypeScript compiles without errors: `npm run build 2>&1 | head -20`</verify>
  <done>HouseholdItem interface exists in src/types/index.ts with all required fields</done>
</task>

<task type="auto">
  <name>Task 2: Create useHouseholdItems hook</name>
  <files>src/hooks/useHouseholdItems.ts</files>
  <action>
Create the CRUD hook by cloning the useStaples.ts pattern with these modifications:

1. Collection name: `'householdItems'` (not 'staples')
2. Type: `HouseholdItem` (not Staple)
3. Remove `toggleEnabled` function (household items don't have enabled/disabled state)
4. Remove `enabledStaples` computed property
5. Add `nameLower` field on addItem: `nameLower: item.name.trim().toLowerCase()`
6. Add `nameLower` field on updateItem when name changes: if updates.name, also set nameLower

Interface:
```typescript
interface UseHouseholdItemsReturn {
  items: HouseholdItem[];
  loading: boolean;
  error: string | null;
  addItem: (item: Omit<HouseholdItem, 'id' | 'householdCode' | 'nameLower'>) => Promise<string>;
  updateItem: (id: string, updates: Partial<Omit<HouseholdItem, 'id' | 'householdCode' | 'nameLower'>>) => Promise<void>;
  deleteItem: (id: string) => Promise<void>;
}
```

The addItem and updateItem functions should automatically compute nameLower from name.
  </action>
  <verify>
1. TypeScript compiles: `npm run build 2>&1 | head -20`
2. Hook exports correctly: `grep -n "export function useHouseholdItems" src/hooks/useHouseholdItems.ts`
  </verify>
  <done>useHouseholdItems hook exists with addItem, updateItem, deleteItem functions that auto-compute nameLower</done>
</task>

</tasks>

<verification>
1. TypeScript compiles without errors
2. HouseholdItem interface has all fields: id, name, nameLower, store, category, brand?, notes?, householdCode
3. useHouseholdItems hook exports addItem, updateItem, deleteItem functions
4. nameLower is auto-computed from name in addItem and updateItem
</verification>

<success_criteria>
- HouseholdItem type is defined with nameLower field for Alexa lookup
- useHouseholdItems hook follows same pattern as useStaples
- CRUD operations work (add, update, delete)
- nameLower is automatically computed on write operations
</success_criteria>

<output>
After completion, create `.planning/phases/32-household-items/32-01-SUMMARY.md`
</output>
