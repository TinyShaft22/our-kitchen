---
phase: 32-household-items
plan: 02
type: execute
wave: 2
depends_on: ["32-01"]
files_modified:
  - src/components/household/HouseholdItemCard.tsx
  - src/components/household/AddHouseholdItemModal.tsx
  - src/components/household/EditHouseholdItemModal.tsx
  - src/pages/GroceryListPage.tsx
autonomous: true

must_haves:
  truths:
    - "User can see saved household items in a collapsible section on Grocery page"
    - "User can add a new household item via modal"
    - "User can edit an existing household item"
    - "User can delete a household item"
    - "User can quickly add a household item to the grocery list with one tap"
  artifacts:
    - path: "src/components/household/HouseholdItemCard.tsx"
      provides: "Card component for displaying household item"
      exports: ["HouseholdItemCard"]
    - path: "src/components/household/AddHouseholdItemModal.tsx"
      provides: "Modal for creating new household item"
      exports: ["AddHouseholdItemModal"]
    - path: "src/components/household/EditHouseholdItemModal.tsx"
      provides: "Modal for editing household item"
      exports: ["EditHouseholdItemModal"]
    - path: "src/pages/GroceryListPage.tsx"
      provides: "Household Items section with CRUD and quick-add"
      contains: "useHouseholdItems"
  key_links:
    - from: "src/pages/GroceryListPage.tsx"
      to: "src/hooks/useHouseholdItems.ts"
      via: "hook import and usage"
      pattern: "useHouseholdItems"
    - from: "src/components/household/HouseholdItemCard.tsx"
      to: "GroceryListPage add flow"
      via: "onAddToList callback"
      pattern: "onAddToList"
---

<objective>
Build the UI components for managing household items and integrate them into the Grocery List page.

Purpose: Enable users to manage a library of saved household products and quickly add them to the grocery list with one tap. The UI follows the existing Staples section pattern but with distinct "Add to List" action instead of enable/disable toggle.

Output: HouseholdItemCard, Add/Edit modals, and GroceryListPage integration with collapsible section.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/32-household-items/32-RESEARCH.md
@.planning/phases/32-household-items/32-01-SUMMARY.md

Reference patterns:
@src/components/grocery/StapleCard.tsx (card pattern)
@src/components/grocery/AddStapleModal.tsx (modal pattern)
@src/components/grocery/EditStapleModal.tsx (edit modal pattern)
@src/pages/GroceryListPage.tsx (collapsible section pattern lines 250-309)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create HouseholdItemCard component</name>
  <files>src/components/household/HouseholdItemCard.tsx</files>
  <action>
Create card component based on StapleCard.tsx pattern with these key differences:

1. NO toggle switch (household items are on-demand, not auto-add)
2. ADD prominent "+ Add to List" button on the right side
3. Show brand and notes if present (subtitle style under name)
4. Keep Edit and Delete actions in a dropdown menu (same as StapleCard)

Props interface:
```typescript
interface HouseholdItemCardProps {
  item: HouseholdItem;
  onAddToList: () => void;    // NEW: Quick add to grocery
  onEdit: () => void;
  onDelete: () => void;
}
```

Layout:
- Left: Item name (bold), brand/notes below in smaller text
- Center: Store and Category badges
- Right: "+ Add" button (terracotta/primary color), dropdown menu for Edit/Delete

The "+ Add" button should be clearly visible and prominent - this is the primary action.
  </action>
  <verify>
1. File exists: `ls src/components/household/HouseholdItemCard.tsx`
2. TypeScript compiles: `npm run build 2>&1 | head -20`
3. Exports component: `grep -n "export function HouseholdItemCard" src/components/household/HouseholdItemCard.tsx`
  </verify>
  <done>HouseholdItemCard component displays item with prominent "+ Add" button and edit/delete menu</done>
</task>

<task type="auto">
  <name>Task 2: Create Add/Edit modals</name>
  <files>
    src/components/household/AddHouseholdItemModal.tsx
    src/components/household/EditHouseholdItemModal.tsx
  </files>
  <action>
Clone AddStapleModal.tsx and EditStapleModal.tsx patterns with these modifications:

**AddHouseholdItemModal:**
- Type: `Omit<HouseholdItem, 'id' | 'householdCode' | 'nameLower'>`
- Fields: name (required), store, category, brand (optional), notes (optional)
- Brand field: text input with placeholder "e.g., Bounty, Charmin"
- Notes field: text input with placeholder "e.g., Get the big rolls"
- Title: "Add Household Item"

**EditHouseholdItemModal:**
- Same fields as Add, pre-populated with item data
- Title: "Edit Household Item"
- Props include the item being edited

Both modals follow exact same styling as staple modals (cream background, sticky header, terracotta save button).
  </action>
  <verify>
1. Files exist: `ls src/components/household/*.tsx`
2. TypeScript compiles: `npm run build 2>&1 | head -20`
3. Add modal exports: `grep -n "export function AddHouseholdItemModal" src/components/household/AddHouseholdItemModal.tsx`
4. Edit modal exports: `grep -n "export function EditHouseholdItemModal" src/components/household/EditHouseholdItemModal.tsx`
  </verify>
  <done>AddHouseholdItemModal and EditHouseholdItemModal exist with name, store, category, brand, notes fields</done>
</task>

<task type="auto">
  <name>Task 3: Integrate into GroceryListPage</name>
  <files>src/pages/GroceryListPage.tsx</files>
  <action>
Add Household Items section to GroceryListPage following the Staples section pattern (lines 250-309).

1. Import useHouseholdItems hook and components
2. Add state for section expansion, modals, edit/delete targets
3. Add collapsible section AFTER Staples section, BEFORE Already Have section

Add imports:
```typescript
import { useHouseholdItems } from '../hooks/useHouseholdItems';
import { HouseholdItemCard } from '../components/household/HouseholdItemCard';
import { AddHouseholdItemModal } from '../components/household/AddHouseholdItemModal';
import { EditHouseholdItemModal } from '../components/household/EditHouseholdItemModal';
```

Add to hook calls section:
```typescript
const { items: householdItems, loading: householdLoading, addItem: addHouseholdItem, updateItem: updateHouseholdItem, deleteItem: deleteHouseholdItem } = useHouseholdItems(householdCode);
```

Add state:
```typescript
const [householdExpanded, setHouseholdExpanded] = useState(false);
const [showAddHousehold, setShowAddHousehold] = useState(false);
const [editingHousehold, setEditingHousehold] = useState<HouseholdItem | null>(null);
const [deleteConfirmHousehold, setDeleteConfirmHousehold] = useState<HouseholdItem | null>(null);
```

Add loading to combined state: `|| householdLoading`

Add addHouseholdItemToGrocery function:
```typescript
const addHouseholdItemToGrocery = async (item: HouseholdItem) => {
  await addItem({
    name: item.name,
    qty: 1,
    unit: 'each',
    category: item.category,
    store: item.store,
    status: 'need',
    source: 'manual',  // Use 'manual' source like voice-added items
  });
};
```

Add the collapsible section with same structure as Staples but:
- Title: "Household Items"
- Count badge: `{householdItems.length}`
- Use HouseholdItemCard with onAddToList calling addHouseholdItemToGrocery
- Add modals at bottom with other modals

Add empty state message: "No household items saved. Add recurring products like paper towels or cleaning supplies."
  </action>
  <verify>
1. TypeScript compiles: `npm run build 2>&1 | head -20`
2. Hook imported: `grep -n "useHouseholdItems" src/pages/GroceryListPage.tsx`
3. Section exists: `grep -n "Household Items" src/pages/GroceryListPage.tsx`
4. Modals rendered: `grep -n "AddHouseholdItemModal" src/pages/GroceryListPage.tsx`
  </verify>
  <done>GroceryListPage has collapsible Household Items section with CRUD and quick-add functionality</done>
</task>

</tasks>

<verification>
1. All TypeScript compiles without errors
2. HouseholdItemCard shows "+ Add" button and edit/delete menu
3. AddHouseholdItemModal creates new items with brand/notes fields
4. EditHouseholdItemModal edits existing items
5. GroceryListPage shows Household Items section below Staples
6. Quick-add button adds item to grocery list with correct store/category
</verification>

<success_criteria>
- User can expand Household Items section to see saved items
- User can add new household items with optional brand/notes
- User can edit existing items
- User can delete items with confirmation
- User can tap "+ Add" to quickly add item to grocery list
- Added items appear in grocery list with correct store and category
</success_criteria>

<output>
After completion, create `.planning/phases/32-household-items/32-02-SUMMARY.md`
</output>
