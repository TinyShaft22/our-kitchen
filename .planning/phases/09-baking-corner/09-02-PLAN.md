---
phase: 09-baking-corner
plan: 02
type: execute
---

<objective>
Create CRUD modals for baking essentials - add, edit, and delete functionality.

Purpose: Allow users to manage their baking inventory with add/edit modals and delete confirmation.
Output: AddBakingModal, EditBakingModal components, delete confirmation integration, FAB for adding.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-phase.md
./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase context:
@.planning/phases/09-baking-corner/09-01-SUMMARY.md

# Existing code:
@src/types/index.ts
@src/hooks/useBaking.ts
@src/pages/BakingPage.tsx
@src/components/baking/BakingEssentialCard.tsx
@src/components/grocery/AddStapleModal.tsx
@src/components/grocery/EditStapleModal.tsx
@src/components/ui/FloatingActionButton.tsx
@src/components/ui/ConfirmDialog.tsx

**Tech stack available:** React, TypeScript, Tailwind, Firebase/Firestore, useBaking hook
**Established patterns:** Bottom-sheet modals (AddStapleModal), ConfirmDialog, FloatingActionButton
**Key files:** Modal patterns from grocery, FAB and ConfirmDialog UI components
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create AddBakingModal</name>
  <files>src/components/baking/AddBakingModal.tsx</files>
  <action>
Create modal for adding new baking essentials, following AddStapleModal pattern.

**Modal structure (bottom sheet):**
- Fixed bottom-0, slides up with backdrop
- Header: "Add Baking Essential" with close (X) and save (checkmark) buttons
- Rounded top corners (rounded-t-softer)

**Form fields:**
- Name (text input, required)
- Quantity (number input, required, min 0)
- Unit (select: cups, oz, lbs, tbsp, tsp, each, bags, boxes)
- Status (select: stocked, low, out) - default to "stocked"

**Common units for baking:**
const BAKING_UNITS = ['cups', 'oz', 'lbs', 'tbsp', 'tsp', 'each', 'bags', 'boxes'];

**Behavior:**
- Validation: name and qty required
- On save: call addEssential from useBaking
- Close modal and reset form on successful save
- Show error if save fails

Props:
- isOpen: boolean
- onClose: () => void
- onAdd: (essential: Omit<BakingEssential, 'id' | 'householdCode'>) => Promise<void>
  </action>
  <verify>Modal renders, form validates, submits correctly</verify>
  <done>AddBakingModal creates new baking essentials</done>
</task>

<task type="auto">
  <name>Task 2: Create EditBakingModal</name>
  <files>src/components/baking/EditBakingModal.tsx</files>
  <action>
Create modal for editing existing baking essentials, following EditStapleModal pattern.

**Same structure as AddBakingModal with differences:**
- Header: "Edit Baking Essential"
- Pre-fill form with existing essential data
- On save: call updateEssential from useBaking

Props:
- isOpen: boolean
- essential: BakingEssential | null
- onClose: () => void
- onSave: (id: string, updates: Partial<Omit<BakingEssential, 'id' | 'householdCode'>>) => Promise<void>

When essential is null, don't render (safeguard).
  </action>
  <verify>Modal pre-fills data, saves updates correctly</verify>
  <done>EditBakingModal updates existing baking essentials</done>
</task>

<task type="auto">
  <name>Task 3: Wire up modals and delete in BakingPage</name>
  <files>src/pages/BakingPage.tsx</files>
  <action>
Integrate modals and delete functionality into BakingPage.

**State additions:**
- showAddModal: boolean
- editingEssential: BakingEssential | null
- deleteConfirmEssential: BakingEssential | null

**FAB integration:**
- Import FloatingActionButton
- Add FAB with "+" icon at bottom right
- On click: setShowAddModal(true)

**Modal integration:**
- Import AddBakingModal, EditBakingModal
- Render AddBakingModal controlled by showAddModal
- Render EditBakingModal controlled by editingEssential

**Delete integration:**
- Import ConfirmDialog
- When card onDelete: set deleteConfirmEssential
- ConfirmDialog: "Delete {name}?" with danger variant
- On confirm: call deleteEssential, clear state

**Wire up card handlers:**
- onEdit: setEditingEssential(essential)
- onDelete: setDeleteConfirmEssential(essential)
- onStatusChange: already wired in 09-01
  </action>
  <verify>npm run build passes, can add/edit/delete essentials via UI</verify>
  <done>Full CRUD functionality works on BakingPage</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] FAB appears on BakingPage
- [ ] Tapping FAB opens AddBakingModal
- [ ] AddBakingModal creates new essential
- [ ] Tapping edit on card opens EditBakingModal with data
- [ ] EditBakingModal updates essential
- [ ] Tapping delete on card shows ConfirmDialog
- [ ] Confirming delete removes essential
- [ ] Form validation works (name/qty required)
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Full CRUD for baking essentials works via UI
</success_criteria>

<output>
After completion, create `.planning/phases/09-baking-corner/09-02-SUMMARY.md`
</output>
