---
phase: 24-interaction-model
plan: 02
type: execute
wave: 2
depends_on: [24-01]
files_modified:
  - our-kitchen-alexa/skill-package/interactionModels/custom/en-US.json
autonomous: true

must_haves:
  truths:
    - "Alexa recognizes 'what's on the grocery list' and triggers ReadGroceryListIntent"
    - "Alexa recognizes 'add milk to the list' and triggers AddGroceryIntent with GroceryItem slot"
    - "Alexa recognizes 'undo' and triggers UndoGroceryIntent"
    - "Alexa recognizes 'link my household' and triggers LinkHouseholdIntent"
    - "Alexa recognizes 'next' and 'previous' for cooking navigation"
  artifacts:
    - path: "our-kitchen-alexa/skill-package/interactionModels/custom/en-US.json"
      provides: "Complete interaction model with grocery and household intents"
      contains: "ReadGroceryListIntent"
  key_links:
    - from: "AddGroceryIntent"
      to: "AMAZON.Food slot type"
      via: "slot reference"
      pattern: '"type": "AMAZON.Food"'
    - from: "LinkHouseholdIntent"
      to: "AMAZON.FOUR_DIGIT_NUMBER slot type"
      via: "slot reference"
      pattern: '"type": "AMAZON.FOUR_DIGIT_NUMBER"'
---

<objective>
Add grocery management intents, household linking, and cooking navigation intents to complete the interaction model.

Purpose: Enable voice commands for grocery list management, household linking, and step-by-step cooking navigation
Output: Complete en-US.json with all intents needed for v2.0 Alexa integration
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-interaction-model/24-CONTEXT.md
@.planning/phases/24-interaction-model/24-RESEARCH.md
@.planning/phases/24-interaction-model/24-01-SUMMARY.md
@our-kitchen-alexa/skill-package/interactionModels/custom/en-US.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add grocery list intents</name>
  <files>our-kitchen-alexa/skill-package/interactionModels/custom/en-US.json</files>
  <action>
Add five grocery-related intents to the interaction model:

**ReadGroceryListIntent** (no slots):
Sample utterances:
- "what's on the grocery list"
- "what do we need to buy"
- "read the grocery list"
- "what's on the list"
- "what do we need"
- "show me the grocery list"
- "read my shopping list"

**AddGroceryIntent** (GroceryItem slot - AMAZON.Food, optional Quantity slot - AMAZON.NUMBER):
Per CONTEXT.md: Confirm + undo via response ("Added milk. Say undo to remove.")
Sample utterances:
- "add {GroceryItem} to the list"
- "add {GroceryItem}"
- "put {GroceryItem} on the list"
- "we need {GroceryItem}"
- "add {Quantity} {GroceryItem}"
- "we need {Quantity} {GroceryItem}"
- "I need {GroceryItem}"
- "get {GroceryItem}"
- "buy {GroceryItem}"

**UndoGroceryIntent** (no slots):
Sample utterances:
- "undo"
- "undo that"
- "take that back"
- "remove that"
- "never mind"
- "cancel that"

**RemoveGroceryIntent** (GroceryItem slot - AMAZON.Food):
Sample utterances:
- "remove {GroceryItem} from the list"
- "remove {GroceryItem}"
- "take {GroceryItem} off the list"
- "delete {GroceryItem}"
- "we don't need {GroceryItem}"

**CheckOffGroceryIntent** (GroceryItem slot - AMAZON.Food):
Sample utterances:
- "check off {GroceryItem}"
- "mark {GroceryItem} as done"
- "got {GroceryItem}"
- "I got {GroceryItem}"
- "picked up {GroceryItem}"
- "{GroceryItem} is in the cart"

Note: All grocery item slots use AMAZON.Food built-in type (handles common food names). Quantity uses AMAZON.NUMBER (handles "three", "3", etc.).
  </action>
  <verify>JSON valid. Five grocery intents added. GroceryItem slots use AMAZON.Food type. Quantity slot uses AMAZON.NUMBER type.</verify>
  <done>ReadGroceryListIntent, AddGroceryIntent, UndoGroceryIntent, RemoveGroceryIntent, and CheckOffGroceryIntent added</done>
</task>

<task type="auto">
  <name>Task 2: Add household linking and cooking navigation intents</name>
  <files>our-kitchen-alexa/skill-package/interactionModels/custom/en-US.json</files>
  <action>
Add household linking intent and built-in navigation intents:

**LinkHouseholdIntent** (PinCode slot - AMAZON.FOUR_DIGIT_NUMBER):
Per CONTEXT.md: Guide to link - "You're not linked yet. Say your 4-digit household code to connect."
Sample utterances:
- "link my household"
- "connect to household {PinCode}"
- "my code is {PinCode}"
- "household code {PinCode}"
- "link to {PinCode}"
- "{PinCode}"
- "use code {PinCode}"

**Built-in Navigation Intents** (for cooking mode step navigation):
Add these with empty samples (built-in utterances: "next", "previous", "go back", "repeat"):
```json
{
  "name": "AMAZON.NextIntent",
  "samples": []
},
{
  "name": "AMAZON.PreviousIntent",
  "samples": []
},
{
  "name": "AMAZON.RepeatIntent",
  "samples": []
}
```

These intents use Alexa's built-in recognition:
- AMAZON.NextIntent: "next", "skip", "next step"
- AMAZON.PreviousIntent: "previous", "go back", "back"
- AMAZON.RepeatIntent: "repeat", "say that again", "what was that"
  </action>
  <verify>JSON valid. LinkHouseholdIntent has PinCode slot of type AMAZON.FOUR_DIGIT_NUMBER. Navigation intents (Next, Previous, Repeat) added.</verify>
  <done>LinkHouseholdIntent and cooking navigation intents added</done>
</task>

<task type="auto">
  <name>Task 3: Final validation and model verification</name>
  <files>our-kitchen-alexa/skill-package/interactionModels/custom/en-US.json</files>
  <action>
Validate the complete interaction model:

1. **Verify intent count** - Should be 17 intents total:
   - Built-in (10): Cancel, Help, Stop, Fallback, NavigateHome, Yes, No, Next, Previous, Repeat
   - Custom (7): BrowseMeals, BrowseCategory, GetRecipe, StartCooking, ReadGroceryList, AddGrocery, UndoGrocery, RemoveGrocery, CheckOffGrocery, LinkHousehold

   Wait, that's 10 custom + 10 built-in = 20. Let me recount:
   - Built-in: CancelIntent, HelpIntent, StopIntent, FallbackIntent, NavigateHomeIntent, YesIntent, NoIntent, NextIntent, PreviousIntent, RepeatIntent = 10
   - Custom: BrowseMealsIntent, BrowseCategoryIntent, GetRecipeIntent, StartCookingIntent, ReadGroceryListIntent, AddGroceryIntent, UndoGroceryIntent, RemoveGroceryIntent, CheckOffGroceryIntent, LinkHouseholdIntent = 10

   Total: 20 intents

2. **Verify slot types** - Should be 2 custom types:
   - MealNameType (from Plan 01)
   - CategoryType (from Plan 01)

   Built-in types used but not defined in types array:
   - AMAZON.Food
   - AMAZON.NUMBER
   - AMAZON.FOUR_DIGIT_NUMBER

3. **Check for utterance collisions:**
   - No duplicate phrases across intents
   - "undo" variations only in UndoGroceryIntent
   - "add X" variations only in AddGroceryIntent
   - "remove X" variations only in RemoveGroceryIntent

4. **Validate JSON structure:**
   - Run JSON linter/parser
   - Ensure all arrays are properly closed
   - Ensure all objects have matching braces
  </action>
  <verify>`cat en-US.json | jq .` succeeds. Intent count is 20. Type count is 2. No duplicate utterances across intents.</verify>
  <done>Complete interaction model with 20 intents covering meals, recipes, groceries, and household linking</done>
</task>

</tasks>

<verification>
1. Validate JSON: `cat en-US.json | jq .` (no errors)
2. Count intents: `cat en-US.json | jq '.interactionModel.languageModel.intents | length'` (should be 20)
3. Count types: `cat en-US.json | jq '.interactionModel.languageModel.types | length'` (should be 2)
4. Verify grocery intents exist: `cat en-US.json | jq '.interactionModel.languageModel.intents[].name' | grep -i grocery`
5. Verify LinkHouseholdIntent exists: `cat en-US.json | jq '.interactionModel.languageModel.intents[].name' | grep LinkHousehold`
</verification>

<success_criteria>
- en-US.json is valid JSON
- 20 intents total (10 built-in + 10 custom)
- All grocery intents use AMAZON.Food for GroceryItem
- LinkHouseholdIntent uses AMAZON.FOUR_DIGIT_NUMBER for PinCode
- Navigation intents (Next, Previous, Repeat) added for cooking mode
- No utterance collisions between intents
- Interaction model ready for Lambda handler development in Phase 25
</success_criteria>

<output>
After completion, create `.planning/phases/24-interaction-model/24-02-SUMMARY.md`
</output>
