---
phase: 38-certification-prep
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - public/privacy.html
  - our-kitchen-alexa/skill-package/skill.json
  - firebase.json
autonomous: true

must_haves:
  truths:
    - "Privacy policy page is accessible at the Firebase Hosting URL"
    - "Skill manifest has complete store listing metadata"
    - "usesPersonalInfo is true and privacyPolicyUrl points to hosted page"
    - "Example phrases match actual interaction model utterances"
  artifacts:
    - path: "public/privacy.html"
      provides: "Privacy policy page for Alexa certification"
      min_lines: 40
    - path: "our-kitchen-alexa/skill-package/skill.json"
      provides: "Complete skill manifest with distribution and privacy fields"
      contains: "privacyPolicyUrl"
  key_links:
    - from: "our-kitchen-alexa/skill-package/skill.json"
      to: "public/privacy.html"
      via: "privacyPolicyUrl field pointing to Firebase Hosting URL"
      pattern: "privacyPolicyUrl.*web\\.app"
---

<objective>
Create privacy policy page and complete skill store listing metadata for Amazon certification.

Purpose: Amazon requires a valid privacy policy URL and complete metadata before certification submission. The skill manifest currently has usesPersonalInfo=false and no privacy URL.
Output: Deployable privacy policy HTML page and updated skill.json with all required distribution fields.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/38-certification-prep/38-RESEARCH.md
@our-kitchen-alexa/skill-package/skill.json
@firebase.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create privacy policy page and configure Firebase Hosting</name>
  <files>public/privacy.html, firebase.json</files>
  <action>
    Create `public/privacy.html` as a standalone static HTML page (NOT a React route -- this must be servable directly by Firebase Hosting without the SPA rewrite).

    Content must include:
    - Skill name: "Our Kitchen" (matching the actual skill name, NOT "Kitchen Helper")
    - Developer: Nick M
    - Data collected: device identifier (for household linking), voice PIN (for authentication), meal planning data, recipes, grocery lists, household items
    - How data is used: meal planning, grocery management, recipe access via voice
    - Data storage: Google Firebase/Firestore
    - No third-party sharing statement
    - Data deletion: unlink device via voice, manage data via Our Kitchen web app
    - Contact email: use a placeholder like ourkitchen.app@gmail.com (user can update)
    - Last updated date: January 2026

    Style with inline CSS: clean, readable, mobile-friendly, max-width 800px centered.

    Update `firebase.json` hosting config to serve privacy.html directly. Add a rewrite rule BEFORE the SPA catch-all:
    ```json
    "rewrites": [
      { "source": "/privacy", "destination": "/privacy.html" },
      { "source": "**", "destination": "/index.html" }
    ]
    ```

    This ensures /privacy serves the static HTML while all other routes still go to the SPA.
  </action>
  <verify>
    - `cat public/privacy.html` shows complete privacy policy
    - `cat firebase.json` shows /privacy rewrite before SPA catch-all
    - `npm run build` still succeeds (privacy.html should be copied to dist/ by Vite's public dir)
  </verify>
  <done>Privacy policy HTML exists in public/, Firebase Hosting configured to serve it at /privacy</done>
</task>

<task type="auto">
  <name>Task 2: Update skill manifest with complete certification metadata</name>
  <files>our-kitchen-alexa/skill-package/skill.json</files>
  <action>
    Update `our-kitchen-alexa/skill-package/skill.json` with all required certification fields:

    1. **publishingInformation** updates:
       - `isAvailableWorldwide`: change to `false`
       - `distributionCountries`: set to `["US"]`
       - `distributionMode`: add as `"PUBLIC"`
       - `testingInstructions`: Update with detailed instructions (will be further refined in Plan 02, but set a proper placeholder now):
         ```
         Test Account Setup:
         1. Say "Alexa, open our kitchen"
         2. When prompted for PIN, say the test PIN (provided separately)
         3. This links to a test household with pre-populated meals, recipes, and grocery items

         Test Flows:
         - Meal browsing: "What's for dinner this week?"
         - Recipe detail: "Show me the recipe for [meal name]"
         - Grocery list: "Read my grocery list"
         - Add grocery: "Add milk to my grocery list"
         - Mark as low: "We're low on flour"

         Notes:
         - Skill uses voice PIN authentication (not standard account linking)
         - Backend hosted on Firebase Cloud Functions
         - Visual templates display on Echo Show devices
         ```

    2. **publishingInformation.locales.en-US** updates:
       - Keep name as "Our Kitchen" (already correct)
       - Keep existing description (already good)
       - Update `examplePhrases` -- these MUST match actual utterances in the interaction model:
         - "Alexa, open our kitchen"
         - "Alexa, ask our kitchen what's for dinner this week"
         - "Alexa, ask our kitchen to read my grocery list"
       - Expand `keywords` to: ["cooking", "recipes", "grocery list", "meal planning", "kitchen", "dinner", "shopping list", "food", "meal prep", "weekly meals"]

    3. **privacyAndCompliance** updates:
       - `usesPersonalInfo`: change to `true`
       - Add `locales.en-US.privacyPolicyUrl`: Use the Firebase Hosting URL. Check the Firebase project name from `.firebaserc` or `firebase.json` to construct the URL: `https://[project-id].web.app/privacy`
       - `termsOfUseUrl`: leave empty string or omit

    Read `.firebaserc` to get the actual Firebase project ID for constructing the privacy policy URL.
  </action>
  <verify>
    - `cat our-kitchen-alexa/skill-package/skill.json | python3 -m json.tool` validates as proper JSON
    - Verify `usesPersonalInfo` is `true`
    - Verify `privacyPolicyUrl` contains the correct Firebase project URL
    - Verify `distributionCountries` is `["US"]`
    - Verify example phrases use "our kitchen" (not "kitchen helper")
  </verify>
  <done>skill.json has complete distribution metadata, privacy compliance fields, and correctly formatted example phrases matching the interaction model</done>
</task>

</tasks>

<verification>
- privacy.html exists and contains all required privacy policy sections
- skill.json passes JSON validation
- usesPersonalInfo=true and privacyPolicyUrl set
- Example phrases use correct invocation name "our kitchen"
- Firebase hosting rewrite serves /privacy before SPA catch-all
</verification>

<success_criteria>
- Privacy policy page ready for deployment at /privacy
- Skill manifest has all required certification metadata fields populated
- No validation errors in skill.json structure
</success_criteria>

<output>
After completion, create `.planning/phases/38-certification-prep/38-01-SUMMARY.md`
</output>
