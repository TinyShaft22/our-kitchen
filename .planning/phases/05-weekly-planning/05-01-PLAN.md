---
phase: 05-weekly-planning
plan: 01
type: execute
---

<objective>
Display this week's meal plan on the Home page with meal cards showing name, servings, and action buttons.

Purpose: Transform the Home page from placeholder to functional weekly plan view.
Output: Working Home page showing weekly meals with WeeklyMealCard components.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-phase.md
./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase providing weekly plan hook:
@.planning/phases/03-data-layer/03-02-SUMMARY.md

# Existing patterns to follow:
@src/pages/MealLibrary.tsx
@src/components/meals/MealCard.tsx
@src/hooks/useWeeklyPlan.ts
@src/hooks/useMeals.ts
@src/types/index.ts

**Tech stack available:** React, TypeScript, Tailwind, Firebase/Firestore
**Established patterns:**
- MealCard component pattern (white card, rounded-soft, shadow-soft)
- Loading/empty/populated state pattern from MealLibrary
- useWeeklyPlan provides currentWeek, loading, weekId, addMealToWeek, removeMealFromWeek, updateServings

**Constraining decisions:**
- [04-01]: Components in feature subdirectories (meals/, ui/, planning/)
- [04-01]: Emoji icons for action buttons
- [03-02]: Compound doc ID {householdCode}_{weekId} for weekly plans
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create WeeklyMealCard component</name>
  <files>src/components/planning/WeeklyMealCard.tsx</files>
  <action>
Create a card component for displaying a meal in the weekly plan. Similar to MealCard but:
- Shows meal name (needs to resolve mealId to meal name via meals array prop)
- Shows servings count with "√ó servings" format
- Edit button (‚úèÔ∏è) to trigger onEditServings callback
- Remove button (üóëÔ∏è) to trigger onRemove callback
- Same styling as MealCard: bg-white rounded-soft shadow-soft p-4
- Props: entry (WeeklyMealEntry), mealName (string), onEditServings, onRemove
- 44px touch targets for buttons
  </action>
  <verify>TypeScript compiles without errors, component exports correctly</verify>
  <done>WeeklyMealCard component created with proper props and styling matching MealCard pattern</done>
</task>

<task type="auto">
  <name>Task 2: Wire Home.tsx with weekly plan display</name>
  <files>src/pages/Home.tsx</files>
  <action>
Transform Home.tsx from placeholder to functional weekly plan view:
1. Import useHousehold, useWeeklyPlan, useMeals hooks
2. Import WeeklyMealCard component
3. Get householdCode from useHousehold
4. Get currentWeek, loading, weekId from useWeeklyPlan(householdCode)
5. Get meals from useMeals(householdCode) to resolve meal names
6. Create helper function to get meal name by ID from meals array
7. Show loading state while loading
8. Show empty state if no meals in currentWeek ("No meals planned this week. Tap + to add some!")
9. Show week identifier in header (e.g., "Week 02, 2026" parsed from weekId)
10. Map currentWeek.meals to WeeklyMealCard components
11. Stub onEditServings and onRemove handlers (console.log for now, wired in 05-03)
  </action>
  <verify>npm run dev, navigate to Home tab, see loading then empty state or meal cards if data exists</verify>
  <done>Home page displays weekly plan with loading/empty/populated states, meals resolve to names</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Home page shows week identifier in header
- [ ] Loading state appears briefly on page load
- [ ] Empty state shows when no meals planned
- [ ] If meals exist in weekly plan, cards display with name and servings
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Home page functional with weekly plan display
- WeeklyMealCard follows established component patterns
</success_criteria>

<output>
After completion, create `.planning/phases/05-weekly-planning/05-01-SUMMARY.md`
</output>
