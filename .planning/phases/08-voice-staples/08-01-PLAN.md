---
phase: 08-voice-staples
plan: 01
type: execute
---

<objective>
Create staples management UI - list view with toggle and add modal.

Purpose: Allow users to define always-grab items that automatically appear on grocery lists.
Output: StapleCard component, staples section on GroceryListPage, AddStapleModal for creating new staples.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-phase.md
./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase context:
@.planning/phases/03-data-layer/03-03-SUMMARY.md
@.planning/phases/07-shopping-mode/07-02-SUMMARY.md

# Existing code:
@src/types/index.ts
@src/hooks/useStaples.ts
@src/pages/GroceryListPage.tsx
@src/components/meals/AddMealModal.tsx

**Tech stack available:** React, TypeScript, Tailwind, Firebase/Firestore, useStaples hook
**Established patterns:** Bottom-sheet modal (AddMealModal), FloatingActionButton, card components (MealCard, GroceryItemCard)
**Key files:** useStaples hook already exists with CRUD + toggleEnabled + enabledStaples computed value
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create StapleCard component with toggle</name>
  <files>src/components/grocery/StapleCard.tsx</files>
  <action>
Create StapleCard component displaying staple info with enable/disable toggle switch.

Structure:
- Display: name, store badge, category badge
- Right side: toggle switch (enabled state)
- Use rounded-soft, bg-white, shadow-soft styling (match GroceryItemCard pattern)
- Toggle uses sage color when enabled, charcoal/20 when disabled
- Min height 44px for touch target
- Store badge uses terracotta/10 bg with terracotta text
- Category badge uses charcoal/10 bg

Props:
- staple: Staple
- onToggle: (enabled: boolean) => void
- onEdit: () => void
- onDelete: () => void

Include edit (pencil emoji) and delete (trash emoji) buttons that appear on tap/hover, similar to MealCard pattern.
  </action>
  <verify>Component renders without errors, TypeScript compiles clean</verify>
  <done>StapleCard displays staple info with functional toggle, edit, and delete buttons</done>
</task>

<task type="auto">
  <name>Task 2: Add Staples section to GroceryListPage with AddStapleModal</name>
  <files>src/pages/GroceryListPage.tsx, src/components/grocery/AddStapleModal.tsx</files>
  <action>
**AddStapleModal (new file):**
Create modal for adding new staples, following AddMealModal pattern:
- Bottom sheet style (fixed bottom-0, slide up)
- Form fields: name (text), store (select from STORES), category (select from CATEGORIES)
- enabled defaults to true
- Save and Cancel buttons
- Validation: name required

**GroceryListPage updates:**
1. Import useStaples hook and AddStapleModal
2. Add collapsible "Staples" section ABOVE the grocery items
3. Section header: "Staples" with count badge and expand/collapse chevron
4. When expanded, show list of StapleCards
5. Add "+" button in section header to open AddStapleModal
6. Collapsed by default, stores state in useState
7. Show brief summary when collapsed: "{enabledCount} of {total} enabled"

Layout order on page:
1. Title + item count
2. Store filter pills
3. Shopping progress (if store selected)
4. **Staples section (collapsible)** - NEW
5. Grocery items grouped by category
6. FAB buttons
  </action>
  <verify>npm run build passes, staples section visible on GroceryListPage, can add new staple via modal</verify>
  <done>Staples section displays with toggle functionality, AddStapleModal creates new staples</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] StapleCard renders with name, store, category, and toggle
- [ ] Staples section shows on GroceryListPage
- [ ] Section expands/collapses correctly
- [ ] AddStapleModal opens, validates, and creates staples
- [ ] Toggle persists enabled state to Firestore
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Staples can be viewed, toggled, and added via UI
</success_criteria>

<output>
After completion, create `.planning/phases/08-voice-staples/08-01-SUMMARY.md`
</output>
