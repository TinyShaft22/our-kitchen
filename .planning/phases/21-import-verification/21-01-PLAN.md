---
phase: 21-import-verification
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/19-muffins-batch/muffins-import.json
autonomous: false

must_haves:
  truths:
    - "Muffins JSON file has correct wrapper format"
    - "Muffins import completes successfully in app"
    - "Brownies import completes successfully in app"
    - "42 new recipes exist in household 0428 Baking section"
  artifacts:
    - path: ".planning/phases/19-muffins-batch/muffins-import.json"
      provides: "Wrapped muffins import data"
      contains: '"version": 1'
  key_links:
    - from: "muffins-import.json"
      to: "ImportMealsModal validation"
      via: "JSON structure"
      pattern: '{"version": 1, "meals":'
---

<objective>
Import remaining Broma recipes (muffins and brownies) into household 0428.

Purpose: Complete the recipe import phase by adding 42 more baked goods to the app.
Output: 42 recipes imported (21 muffins + 21 brownies), visible in Baking section under Broma folders.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/21-import-verification/21-CONTEXT.md
@src/components/settings/ImportMealsModal.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix muffins-import.json format</name>
  <files>.planning/phases/19-muffins-batch/muffins-import.json</files>
  <action>
The muffins-import.json file is a raw array `[...]` but ImportMealsModal requires:
```json
{
  "version": 1,
  "meals": [...]
}
```

Also, each meal object is missing required fields. Add to each meal:
- `"servings": 12` (standard muffin batch)
- `"isBaking": true`

Steps:
1. Read the current muffins-import.json
2. Parse the array
3. For each meal object, add `servings: 12` and `isBaking: true`
4. Wrap in `{version: 1, meals: [...]}`
5. Write back to same file
  </action>
  <verify>
Run: `head -20 ".planning/phases/19-muffins-batch/muffins-import.json"`
Should show `{"version": 1, "meals": [` at start and each meal should have `servings` and `isBaking` fields.
  </verify>
  <done>muffins-import.json has correct wrapper and all required fields per meal</done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 2: Import muffins and brownies via app</name>
  <what-built>Fixed muffins JSON format, brownies JSON already correct</what-built>
  <action>
Browser automation does not work from WSL. User must perform these imports in PowerShell.

--- POWERSHELL HANDOFF ---
Run this in PowerShell (not WSL):
1. Open PowerShell
2. Ensure dev server is running: `cd "C:\Users\Nick M\Desktop\Food App Idea" && npm run dev`
3. Open browser to http://localhost:5173
4. Log into household 0428

**Import Muffins:**
1. Go to Settings page (gear icon in nav)
2. Click "Import Meals" button
3. Open this file in VS Code or notepad:
   `C:\Users\Nick M\Desktop\Food App Idea\.planning\phases\19-muffins-batch\muffins-import.json`
4. Copy entire contents (Ctrl+A, Ctrl+C)
5. Paste into Import Meals modal text area
6. Click "Load Meals" - should show 21 muffin recipes
7. Verify all are selected, click "Import 21 Meals"
8. Wait for import to complete

**Import Brownies:**
1. Click "Import Meals" again
2. Open this file:
   `C:\Users\Nick M\Desktop\Food App Idea\.planning\phases\20-brownies-batch\brownies-import.json`
3. Copy entire contents
4. Paste into modal, click "Load Meals" - should show 21 brownie recipes
5. Click "Import 21 Meals"
6. Wait for import to complete

**Verify:**
- Go to Baking section
- Should see Broma folder
- Inside Broma: Muffins folder (21 recipes), Brownies folder (21 recipes)
- Plus existing Cookies (27) and Bars (36)

When done, return to WSL and tell me:
- Number of muffins imported
- Number of brownies imported
- Any errors encountered
--- END HANDOFF ---
  </action>
  <resume-signal>Report: "X muffins, Y brownies imported" or describe any errors</resume-signal>
</task>

</tasks>

<verification>
- muffins-import.json has `{"version": 1, "meals": [...]}` structure
- Each muffin meal has `servings` and `isBaking` fields
- User confirms successful import of 21 muffins and 21 brownies
- Baking section shows all 4 Broma subcategories
</verification>

<success_criteria>
- 42 new recipes imported to household 0428
- Muffins appear under Broma/Muffins (21 recipes)
- Brownies appear under Broma/Brownies (21 recipes)
- No import errors
</success_criteria>

<output>
After completion, create `.planning/phases/21-import-verification/21-01-SUMMARY.md`
</output>
